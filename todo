Vector: protect each allocate operation with a check for max_size

check exceptions for vector

expand main to test "everything"

write main to test set
